{% extends 'recipes/base.html' %}
{% block content %}
<div class="max-w-4xl mx-auto p-6">
  <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
    <div class="bg-white rounded-xl p-4 shadow">Total Recipes<br><span class="text-2xl font-bold">{{ total_recipes }}</span></div>
    <div class="bg-white rounded-xl p-4 shadow">Saved Recipes<br><span class="text-2xl font-bold">{{ saved_recipes }}</span></div>
    <div class="bg-white rounded-xl p-4 shadow">Recent Searches<br><span class="text-sm block mt-2">
      {% for s in recent_searches %}
        <div class="py-1">{{ s.ingredients_raw|truncatechars:40 }}</div>
      {% empty %}
        <div class="py-1 text-slate-500">No recent searches</div>
      {% endfor %}
    </span></div>
  </div>

  <div class="mt-6 bg-white p-4 rounded-xl shadow">
    <h3 class="font-semibold">Difficulty Distribution</h3>
    <canvas id="difficultyChart" width="400" height="200"></canvas>
  </div>

  <script>window.DASHBOARD_ANALYTICS = {{ analytics|safe }};</script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="{% static 'recipes/js/dashboard.js' %}"></script>
</div>
{% endblock %}
